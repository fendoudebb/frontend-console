webpackJsonp([6],{"7PXo":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Dd8w"),n=a.n(s),i={name:"message-detail",props:{row:Object}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",{staticClass:"expand-key"},[e._v("User-Agent: ")]),e._v(" "),a("span",{staticClass:"expand-value"},[e._v(e._s(e.row.userAgent))]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"expand-key"},[e._v("留言内容: ")]),e._v(" "),a("span",{staticClass:"expand-value"},[e._v(e._s(e.row.content))])])},staticRenderFns:[]};var o=a("VU/8")(i,r,!1,function(e){a("ITZP")},"data-v-1219f762",null).exports,l=a("SJI6"),c={name:"message-board",components:{expandRow:o},data:function(){var e=this;return{roles:localStorage.getItem("roles"),messageListTableLoading:!1,messageList:[],messageListColumns:[{type:"expand",width:50,render:function(e,t){return e(o,{props:{row:t.row}})}},{title:"ID",key:"id",align:"center"},{title:"昵称",key:"nickname",align:"center"},{title:"留言时间",key:"commentTime",align:"center"},{title:"楼层",key:"floor",align:"center"},{title:"浏览器",key:"browser",align:"center"},{title:"操作系统",key:"os",align:"center"},{title:"IP",key:"ip",align:"center"},{title:"状态",key:"status",align:"center",render:function(e,t){var a=t.row.status,s="",n="";return"ONLINE"===a?(s="上线",n="green"):"OFFLINE"===a&&(s="下线",n="red"),e("Tag",{props:{color:n}},s)}},{title:"操作",key:"action",align:"center",render:function(t,a){var s=[];if(e.roles.indexOf("ROLE_ADMIN")>-1){var n=t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.deleteMessage(a)}}},"删除");s.push(n)}return t("div",[s])}}]}},methods:n()({},Object(l.mapMutations)(["setMessageBoardListPage","setMessageId"]),Object(l.mapGetters)(["getMessageBoardListSize"]),Object(l.mapActions)(["handleMessageBoardList","handleDeleteMessage"]),{deleteMessage:function(e){var t=this;this.$Modal.confirm({title:"删除留言",content:"是否删除"+e.row.nickname+"用户的留言？",okText:"确认删除",closable:!0,onOk:function(){t.setMessageId(e.row.id),t.handleDeleteMessage().then(function(e){t.$Message.success("删除成功！"),t.getMessageBoardList()})}})},changePage:function(e){this.setMessageBoardListPage(e),this.getMessageBoardList()},getMessageBoardList:function(){var e=this;this.messageListTableLoading=!0,this.handleMessageBoardList().then(function(t){e.totalCount=t.data.totalCount,e.messageList=t.data.comments,e.messageListTableLoading=!1}).catch(function(t){e.messageListTableLoading=!1})}}),created:function(){this.getMessageBoardList()}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{margin:"20px",padding:"20px","background-color":"white"}},[a("Table",{attrs:{border:"",stripe:"",data:e.messageList,columns:e.messageListColumns,loading:e.messageListTableLoading}}),e._v(" "),a("div",{staticStyle:{margin:"20px",overflow:"hidden"}},[a("Page",{attrs:{"page-size":e.pageSize,total:e.totalCount,current:e.currentPage,"show-elevator":"","show-total":""},on:{"on-change":e.changePage}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,g,!1,function(e){a("xiw/")},"data-v-397f69a4",null);t.default=d.exports},ITZP:function(e,t){},"xiw/":function(e,t){}});
//# sourceMappingURL=6.968091901e3cef865383.js.map