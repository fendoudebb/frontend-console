webpackJsonp([10],{KOsW:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e("Dd8w"),n=e.n(o),c=e("SJI6"),s={name:"topic",data:function(){var t=this;return{roles:localStorage.getItem("roles"),topicListTableLoading:!1,topicList:[],pageSize:this.getTopicListSize(),totalCount:1,currentPage:1,topicListColumns:[{title:"排序",key:"sort",align:"center",ellipsis:!0,minWidth:150},{title:"ID",key:"id",align:"center",ellipsis:!0,minWidth:150},{title:"标签",key:"name",align:"center",ellipsis:!0,minWidth:150},{title:"操作",key:"action",align:"center",ellipsis:!0,minWidth:150,render:function(i,e){var o=[];if(t.roles.indexOf("ROLE_ADMIN")>-1){var n=i("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modifyName(e)}}},"修改"),c=i("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modifySort(e)}}},"排序"),s=i("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.deleteTopic(e)}}},"删除");o.push(n),o.push(c),o.push(s)}return i("div",[o])}}]}},methods:n()({},Object(c.mapMutations)(["setTopicListPage","setTopic","setDeleteTopicId","setModifyNameTopicId","setModifyTopicName","setModifySortTopicId","setTopicSort"]),Object(c.mapGetters)(["getTopicListSize"]),Object(c.mapActions)(["handleTopicList","handleAddTopic","handleDeleteTopic","handleModifyTopicSort","handleModifyTopicName"]),{deleteTopic:function(t){var i=this;this.$Modal.confirm({title:"删除标签",content:"是否删除《"+t.row.name+"》分类？",okText:"确认删除",closable:!0,onOk:function(){i.setDeleteTopicId(t.row.id),i.handleDeleteTopic().then(function(t){i.$Message.success("删除成功！"),i.getTopicList()})}})},modifyName:function(t){var i=this;this.$Modal.confirm({render:function(t){return t("Input",{props:{value:i.modifyTopicName,autofocus:!0,placeholder:"请输入名称..."},on:{input:function(t){i.modifyTopicName=t}}})},onOk:function(){i.setModifyNameTopicId(t.row.id),i.setModifyTopicName(i.modifyTopicName),i.handleModifyTopicName().then(function(t){i.$Message.success("修改成功！"),i.modifyTopicName="",i.getTopicList()})}})},modifySort:function(t){var i=this;this.$Modal.confirm({render:function(t){return t("Input",{props:{value:i.newTopicSort,autofocus:!0,placeholder:"请输入排序..."},on:{input:function(t){i.newTopicSort=t}}})},onOk:function(){i.setModifySortTopicId(t.row.id),i.setTopicSort(i.newTopicSort),i.handleModifyTopicSort().then(function(t){i.$Message.success("修改成功！"),i.newTopicSort="",i.getTopicList()})}})},addNewTopic:function(){var t=this;this.$Modal.confirm({render:function(i){return i("Input",{props:{value:t.newTopic,autofocus:!0,placeholder:"请输入标签名..."},on:{input:function(i){t.newTopic=i}}})},onOk:function(){t.setTopic(t.newTopic),t.handleAddTopic().then(function(i){t.$Message.success("添加成功！"),t.newTopic="",t.getTopicList()})}})},changePage:function(t){this.setTopicListPage(t),this.getTopicList()},getTopicList:function(){var t=this;this.topicListTableLoading=!0,this.handleTopicList().then(function(i){t.totalCount=i.data.totalCount,t.topicList=i.data.topic,t.topicListTableLoading=!1}).catch(function(i){t.topicListTableLoading=!1})}}),created:function(){this.getTopicList()}},a={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticStyle:{margin:"20px",padding:"20px","background-color":"white"}},[this.roles.indexOf("ROLE_ADMIN")>-1?e("div",{staticStyle:{"margin-bottom":"20px"}},[e("Button",{attrs:{type:"primary"},on:{click:t.addNewTopic}},[e("Icon",{attrs:{type:"plus-round"}}),t._v("\n      新建标签\n    ")],1)],1):t._e(),t._v(" "),e("Table",{attrs:{border:"",stripe:"",data:t.topicList,columns:t.topicListColumns,loading:t.topicListTableLoading}}),t._v(" "),e("div",{staticStyle:{margin:"20px",overflow:"hidden"}},[e("Page",{attrs:{"page-size":t.pageSize,total:t.totalCount,current:t.currentPage,"show-elevator":"","show-total":""},on:{"on-change":t.changePage}})],1)],1)},staticRenderFns:[]};var p=e("VU/8")(s,a,!1,function(t){e("yLIv")},"data-v-1f004237",null);i.default=p.exports},yLIv:function(t,i){}});
//# sourceMappingURL=10.6d205d0f7b9d341dad0b.js.map