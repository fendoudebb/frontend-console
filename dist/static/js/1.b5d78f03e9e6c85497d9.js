webpackJsonp([1],{HLPr:function(t,e){},KOsW:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("Dd8w"),n=i.n(o),c=i("SJI6"),a={name:"topic",data:function(){var t=this;return{roles:localStorage.getItem("roles"),topicListTableLoading:!1,topicList:[],pageSize:this.getTopicListSize(),totalCount:1,currentPage:1,topicListColumns:[{title:"ID",key:"id",align:"center"},{title:"标签",key:"name",align:"center"},{title:"排序",key:"sort",align:"center"},{title:"操作",key:"action",align:"center",render:function(e,i){var o=[];if(t.roles.indexOf("ROLE_ADMIN")>-1){var n=e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.deleteTopic(i)}}},"删除"),c=e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.modifySort(i)}}},"修改排序");o.push(n),o.push(c)}return e("div",[o])}}]}},methods:n()({},Object(c.mapMutations)(["setTopicListPage","setTopic","setDeleteTopicId","setModifySortTopicId","setTopicSort"]),Object(c.mapGetters)(["getTopicListSize"]),Object(c.mapActions)(["handleTopicList","handleAddTopic","handleDeleteTopic","handleModifyTopicSort"]),{deleteTopic:function(t){var e=this;this.$Modal.confirm({title:"删除标签",content:"是否删除《"+t.row.name+"》分类？",okText:"确认删除",closable:!0,onOk:function(){e.setDeleteTopicId(t.row.id),e.handleDeleteTopic().then(function(t){e.$Message.success("删除成功！"),e.getTopicList()})}})},modifySort:function(t){var e=this;this.$Modal.confirm({render:function(t){return t("Input",{props:{value:e.newTopicSort,autofocus:!0,placeholder:"请输入排序..."},on:{input:function(t){e.newTopicSort=t}}})},onOk:function(){e.setModifySortTopicId(t.row.id),e.setTopicSort(e.newTopicSort),e.handleModifyTopicSort().then(function(t){e.$Message.success("修改成功！"),e.newTopicSort="",e.getTopicList()})}})},addNewTopic:function(){var t=this;this.$Modal.confirm({render:function(e){return e("Input",{props:{value:t.newTopic,autofocus:!0,placeholder:"请输入标签名..."},on:{input:function(e){t.newTopic=e}}})},onOk:function(){t.setTopic(t.newTopic),t.handleAddTopic().then(function(e){t.$Message.success("添加成功！"),t.newTopic="",t.getTopicList()})}})},changePage:function(t){this.setTopicListPage(t),this.getTopicList()},getTopicList:function(){var t=this;this.topicListTableLoading=!0,this.handleTopicList().then(function(e){t.totalCount=e.data.totalCount,t.topicList=e.data.topic,t.topicListTableLoading=!1}).catch(function(e){t.topicListTableLoading=!1})}}),created:function(){this.getTopicList()}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{margin:"20px",padding:"20px","background-color":"white"}},[i("div",{staticStyle:{"margin-bottom":"20px"}},[i("Button",{attrs:{type:"primary"},on:{click:t.addNewTopic}},[i("Icon",{attrs:{type:"plus-round"}}),t._v("\n      新建标签\n    ")],1)],1),t._v(" "),i("Table",{attrs:{border:"",stripe:"",data:t.topicList,columns:t.topicListColumns,loading:t.topicListTableLoading}}),t._v(" "),i("div",{staticStyle:{margin:"20px",overflow:"hidden"}},[i("Page",{attrs:{"page-size":t.pageSize,total:t.totalCount,current:t.currentPage,"show-elevator":"","show-total":""},on:{"on-change":t.changePage}})],1)],1)},staticRenderFns:[]};var r=i("VU/8")(a,s,!1,function(t){i("HLPr")},"data-v-56cb4f45",null);e.default=r.exports}});
//# sourceMappingURL=1.b5d78f03e9e6c85497d9.js.map